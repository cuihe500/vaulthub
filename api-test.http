### VaultHub API 测试文件
### 使用说明：
### 1. 首先执行注册和登录接口获取token
### 2. 将获取的token填入下方的 @token 变量
### 3. 将获取的用户UUID填入 @userUuid 变量
### 4. 按顺序执行各个接口测试

### 环境变量配置
@baseUrl = http://localhost:8080
@token = your-jwt-token-here
@userUuid = user-uuid-here

### ============================================
### 1. 系统接口
### ============================================

### 1.1 健康检查
GET {{baseUrl}}/health
Content-Type: application/json

### ============================================
### 2. 认证接口
### ============================================

### 2.1 用户注册
POST {{baseUrl}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "cuihe500",
  "password": "Ch870219176!"
}

### 2.2 用户登录
POST {{baseUrl}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "cuihe500",
  "password": "Ch870219176!"
}

### 2.3 获取当前用户信息
GET {{baseUrl}}/api/v1/auth/me
Content-Type: application/json
Authorization: Bearer {{token}}

### 2.4 用户登出
POST {{baseUrl}}/api/v1/auth/logout
Content-Type: application/json
Authorization: Bearer {{token}}

### ============================================
### 3. 用户管理接口（需要管理员权限）
### ============================================

### 3.1 获取用户列表（基本查询）
GET {{baseUrl}}/api/v1/users
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.2 获取用户列表（带分页）
GET {{baseUrl}}/api/v1/users?page=1&page_size=10
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.3 获取用户列表（按状态过滤 - 活跃）
GET {{baseUrl}}/api/v1/users?status=1
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.4 获取用户列表（按状态过滤 - 已禁用）
GET {{baseUrl}}/api/v1/users?status=2
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.5 获取用户列表（按状态过滤 - 已锁定）
GET {{baseUrl}}/api/v1/users?status=3
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.6 获取用户列表（按角色过滤 - 管理员）
GET {{baseUrl}}/api/v1/users?role=admin
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.7 获取用户列表（按角色过滤 - 普通用户）
GET {{baseUrl}}/api/v1/users?role=user
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.8 获取用户列表（按角色过滤 - 只读用户）
GET {{baseUrl}}/api/v1/users?role=readonly
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.9 获取用户列表（复合条件）
GET {{baseUrl}}/api/v1/users?page=1&page_size=20&status=1&role=user
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.10 获取单个用户信息
GET {{baseUrl}}/api/v1/users/{{userUuid}}
Content-Type: application/json
Authorization: Bearer {{token}}

### 3.11 更新用户状态（禁用）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/status
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "status": 2
}

### 3.12 更新用户状态（锁定）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/status
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "status": 3
}

### 3.13 更新用户状态（激活）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/status
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "status": 1
}

### 3.14 更新用户角色（设置为管理员）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/role
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "role": "admin"
}

### 3.15 更新用户角色（设置为普通用户）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/role
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "role": "user"
}

### 3.16 更新用户角色（设置为只读用户）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/role
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "role": "readonly"
}

### ============================================
### 4. 错误测试场景
### ============================================

### 4.1 注册（用户名过短）
POST {{baseUrl}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "ab",
  "password": "testpass123456"
}

### 4.2 注册（用户名过长）
POST {{baseUrl}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "abcdefghijklmnopqrstuvwxyz1234567",
  "password": "testpass123456"
}

### 4.3 注册（密码过短）
POST {{baseUrl}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "testuser",
  "password": "short"
}

### 4.4 登录（错误的密码）
POST {{baseUrl}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "wrongpassword"
}

### 4.5 登录（不存在的用户）
POST {{baseUrl}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "nonexistent",
  "password": "testpass123456"
}

### 4.6 无token访问需要认证的接口
GET {{baseUrl}}/api/v1/auth/me
Content-Type: application/json

### 4.7 无效的token
GET {{baseUrl}}/api/v1/auth/me
Content-Type: application/json
Authorization: Bearer invalid-token

### 4.8 更新用户角色（无效的角色）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/role
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "role": "superadmin"
}

### 4.9 更新用户状态（无效的状态）
PUT {{baseUrl}}/api/v1/users/{{userUuid}}/status
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "status": 99
}

### 4.10 获取不存在的用户
GET {{baseUrl}}/api/v1/users/non-existent-uuid
Content-Type: application/json
Authorization: Bearer {{token}}
